<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Invoice Generator & PDF – ToolNest</title>

<meta name="description" content="Create professional GST or non-GST invoices and download PDF instantly. Free Invoice Generator by ToolNest.">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="icon" href="../favicon.png">
<link rel="stylesheet" href="../style.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body class="tool-invoice">

<div id="header"></div>

<section class="mini-hero">
  <div class="hero-top">
    <a href="../index.html" class="back-home">⬅ Back to Home</a>
  </div>
  <h1>AI Invoice Generator</h1>
  <p>GST & Non-GST Invoice with PDF Download</p>
</section>

<section class="container">
<div class="tool-box">

<h3>Business Details</h3>
<input id="bizName" placeholder="Business Name">
<input id="bizEmail" placeholder="Business Email">
<input id="gstNumber" placeholder="GST Number (Optional)">

<h3>Client Details</h3>
<input id="clientName" placeholder="Client Name">
<input id="clientEmail" placeholder="Client Email">

<h3>Invoice Info</h3>
<input id="invoiceNo" placeholder="Invoice Number">
<input type="date" id="invoiceDate">

<h3>Invoice Items</h3>

<table id="itemsTable" style="width:100%">
<tr>
<th>Item</th>
<th>Qty</th>
<th>Price</th>
<th>Total</th>
<th></th>
</tr>
</table>

<button onclick="addItem()">+ Add Item</button>

<br><br>

<label>GST % (only if GST applicable)</label>
<input type="number" id="gstPercent" value="0">

<button onclick="generateInvoice()">Generate Invoice</button>
<button onclick="downloadPDF()">Download PDF</button>

</div>
</section>

<!-- PREVIEW -->
<section class="container">
<div class="tool-box" id="invoicePreview" style="display:none">

<h2>Invoice</h2>
<p><strong id="pBiz"></strong></p>
<p id="pBizEmail"></p>
<p id="pGST" style="display:none"></p>

<hr>

<p><strong>Billed To:</strong> <span id="pClient"></span></p>
<p id="pClientEmail"></p>

<p>Invoice #: <span id="pInvNo"></span></p>
<p>Date: <span id="pInvDate"></span></p>

<table style="width:100%;margin-top:20px;border-collapse:collapse">
<thead>
<tr id="tableHead">
<th>Item</th>
<th>Qty</th>
<th>Price</th>
<th>Total</th>
</tr>
</thead>
<tbody id="previewItems"></tbody>
</table>

<hr>

<p>Subtotal: ₹ <span id="subTotal"></span></p>
<p id="gstRow" style="display:none">GST: ₹ <span id="gstAmount"></span></p>
<h3>Grand Total: ₹ <span id="grandTotal"></span></h3>

</div>
</section>

<div class="ad-box">Advertisement</div>

<div id="footer"></div>

<script src="../includes/include.js"></script>
<script src="../darkmode.js"></script>

<script>
function addItem(){
  const row=document.createElement("tr");
  row.innerHTML=`
    <td><input></td>
    <td><input type="number" value="1" onchange="calc()"></td>
    <td><input type="number" value="0" onchange="calc()"></td>
    <td class="lineTotal">0</td>
    <td><button onclick="this.parentElement.parentElement.remove();calc()">❌</button></td>
  `;
  itemsTable.appendChild(row);
}
addItem();

function calc(){
  let subtotal=0;
  [...itemsTable.rows].slice(1).forEach(r=>{
    const q=r.cells[1].children[0].value;
    const p=r.cells[2].children[0].value;
    const t=q*p;
    r.querySelector(".lineTotal").innerText=t.toFixed(2);
    subtotal+=t;
  });
  return subtotal;
}

function generateInvoice(){
  invoicePreview.style.display="block";

  pBiz.innerText=bizName.value;
  pBizEmail.innerText=bizEmail.value;
  pClient.innerText=clientName.value;
  pClientEmail.innerText=clientEmail.value;
  pInvNo.innerText=invoiceNo.value;
  pInvDate.innerText=invoiceDate.value;

  // GST logic
  if(gstNumber.value.trim()!==""){
    pGST.style.display="block";
    pGST.innerText="GST No: "+gstNumber.value;
    gstRow.style.display="block";
  }else{
    pGST.style.display="none";
    gstRow.style.display="none";
  }

  previewItems.innerHTML="";
  let subtotal=calc();

  [...itemsTable.rows].slice(1).forEach(r=>{
    previewItems.innerHTML+=`
      <tr>
        <td>${r.cells[0].children[0].value}</td>
        <td>${r.cells[1].children[0].value}</td>
        <td>${r.cells[2].children[0].value}</td>
        <td>${r.querySelector(".lineTotal").innerText}</td>
      </tr>`;
  });

  const gstP=Number(gstPercent.value)||0;
  const gstVal=gstNumber.value?subtotal*gstP/100:0;

  subTotal.innerText=subtotal.toFixed(2);
  gstAmount.innerText=gstVal.toFixed(2);
  grandTotal.innerText=(subtotal+gstVal).toFixed(2);
}

function downloadPDF(){
  invoicePreview.style.display="block";
  setTimeout(()=>{
    html2pdf().set({
      margin:10,
      filename:'toolnest-invoice.pdf',
      html2canvas:{scale:2},
      jsPDF:{unit:'mm',format:'a4'}
    }).from(invoicePreview).save();
  },300);
}
</script>

</body>
</html>
