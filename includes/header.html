<!-- ToolNest Header Component -->
<header class="topbar">
  <a href="/index.html" class="logo">
    <img src="/favicon.png" alt="ToolNest logo" width="32" height="32">
    ToolNest
  </a>
  
  <!-- Mobile Menu Toggle Button -->
  <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu" aria-expanded="false">
    <span class="hamburger"></span>
    <span class="hamburger"></span>
    <span class="hamburger"></span>
  </button>
  
  <!-- Navigation -->
  <nav class="nav-right" id="navRight">
    <a href="/index.html" class="nav-link">üè† Home</a>
    <a href="/about.html" class="nav-link">‚ÑπÔ∏è About</a>
    <a href="/contact.html" class="nav-link">üìß Contact</a>
    <a href="/blog.html" class="nav-link">üìö Blog</a>
    <a href="/faq.html" class="nav-link">‚ùì FAQ</a>
    
    <!-- Tools Dropdown -->
    <div class="dropdown">
      <button class="dropbtn" id="toolsDropdownBtn" aria-haspopup="true" aria-expanded="false">
        üõ†Ô∏è Tools <span class="arrow">‚ñæ</span>
      </button>
      <div class="dropdown-content" id="toolsDropdown" role="menu">
        <a href="/tools/invoice-generator.html" role="menuitem">üßæ Invoice Generator</a>
        <a href="/tools/merge-pdf.html" role="menuitem">üìÑ Merge PDF</a>
        <a href="/tools/image-compress.html" role="menuitem">üñºÔ∏è Image Compressor</a>
        <a href="/tools/pdf-to-jpg.html" role="menuitem">üîÑ PDF to JPG</a>
        <a href="/tools/youtube-downloader.html" role="menuitem">üì∫ YouTube Downloader</a>
        <a href="/tools/seo-generator.html" role="menuitem">üîç SEO Generator</a>
        <a href="/tools/word-counter.html" role="menuitem">üìù Word Counter</a>
        <a href="/tools/resume-builder.html" role="menuitem">üíº Resume Builder</a>
      </div>
    </div>
    
    <!-- Dark Mode Toggle -->
    <button class="dark-toggle-btn" id="darkToggle" aria-label="Toggle dark mode">üåô</button>
  </nav>
</header>

<!-- Mobile Overlay -->
<div class="mobile-overlay" id="mobileOverlay"></div>

<style>
/* ============ MOBILE MENU STYLES ============ */

/* Mobile Menu Toggle Button */
.mobile-menu-toggle {
  display: none;
  flex-direction: column;
  justify-content: space-around;
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0;
  z-index: 1001;
}

.hamburger {
  width: 28px;
  height: 3px;
  background: var(--text-main);
  border-radius: 10px;
  transition: all 0.3s ease;
  transform-origin: 1px;
}

.mobile-menu-toggle.active .hamburger:nth-child(1) {
  transform: rotate(45deg);
}

.mobile-menu-toggle.active .hamburger:nth-child(2) {
  opacity: 0;
  transform: translateX(20px);
}

.mobile-menu-toggle.active .hamburger:nth-child(3) {
  transform: rotate(-45deg);
}

/* Mobile Overlay */
.mobile-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 998;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.mobile-overlay.active {
  display: block;
  opacity: 1;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .mobile-menu-toggle {
    display: flex;
  }
  
  .nav-right {
    position: fixed;
    top: 0;
    right: -100%;
    width: 280px;
    height: 100vh;
    background: var(--bg-card);
    flex-direction: column;
    align-items: stretch;
    padding: 80px 0 20px;
    box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
    transition: right 0.3s ease;
    z-index: 999;
    overflow-y: auto;
    gap: 0;
  }
  
  .nav-right.active {
    right: 0;
  }
  
  .nav-right .nav-link {
    width: 100%;
    padding: 16px 25px;
    border-bottom: 1px solid var(--border);
    font-size: 16px;
    text-decoration: none;
    color: var(--text-main);
    display: block;
    transition: background 0.2s;
  }
  
  .nav-right .nav-link:hover {
    background: var(--bg-main);
  }
  
  .nav-right .dropdown {
    width: 100%;
    position: relative;
  }
  
  .nav-right .dropbtn {
    width: 100%;
    text-align: left;
    padding: 16px 25px;
    border-bottom: 1px solid var(--border);
    background: transparent;
    border-radius: 0;
    font-size: 16px;
    justify-content: space-between;
    display: flex;
    align-items: center;
    color: var(--text-main);
    border-top: none;
    border-left: none;
    border-right: none;
    cursor: pointer;
  }
  
  .nav-right .dropbtn:hover {
    background: var(--bg-main);
  }
  
  .nav-right .dropdown-content {
    position: static;
    width: 100%;
    box-shadow: none;
    border: none;
    border-radius: 0;
    background: var(--bg-main);
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }
  
  .nav-right .dropdown-content.show {
    max-height: 500px;
    border-bottom: 1px solid var(--border);
  }
  
  .nav-right .dropdown-content a {
    padding: 14px 25px 14px 45px;
    border-bottom: 1px solid var(--border);
    font-size: 15px;
  }
  
  .nav-right .dropdown-content a:last-child {
    border-bottom: none;
  }
  
  .nav-right .dark-toggle-btn {
    width: 100%;
    padding: 16px 25px;
    text-align: left;
    background: transparent;
    border: none;
    border-radius: 0;
    font-size: 24px;
    cursor: pointer;
    color: var(--text-main);
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .nav-right .dark-toggle-btn:hover {
    background: var(--bg-main);
  }
  
  .nav-right .dark-toggle-btn::before {
    content: 'Dark Mode';
    font-size: 16px;
    font-weight: 600;
  }
  
  .arrow {
    transition: transform 0.3s ease;
    display: inline-block;
  }
  
  .dropbtn[aria-expanded="true"] .arrow {
    transform: rotate(180deg);
  }
}

/* Desktop - ensure normal behavior */
@media (min-width: 769px) {
  .mobile-overlay {
    display: none !important;
  }
  
  .nav-right {
    position: static !important;
    flex-direction: row !important;
    width: auto !important;
    height: auto !important;
    padding: 0 !important;
    box-shadow: none !important;
    background: transparent !important;
  }
  
  .nav-right .nav-link {
    width: auto;
    padding: 8px 15px;
    border: none;
  }
  
  .nav-right .dropbtn {
    width: auto;
    border: none;
  }
  
  .nav-right .dark-toggle-btn::before {
    display: none;
  }
}
</style>

<script>
(function() {
  'use strict';
  
  function initMobileMenu() {
    const mobileToggle = document.getElementById('mobileMenuToggle');
    const navRight = document.getElementById('navRight');
    const mobileOverlay = document.getElementById('mobileOverlay');
    const dropdownBtn = document.getElementById('toolsDropdownBtn');
    const dropdownContent = document.getElementById('toolsDropdown');
    const darkToggle = document.getElementById('darkToggle');
    
    if (!mobileToggle || !navRight) {
      console.warn('Mobile menu elements not found');
      return;
    }
    
    // Toggle mobile menu
    mobileToggle.addEventListener('click', function(e) {
      e.stopPropagation();
      const isActive = navRight.classList.toggle('active');
      mobileToggle.classList.toggle('active');
      if (mobileOverlay) {
        mobileOverlay.classList.toggle('active');
      }
      
      mobileToggle.setAttribute('aria-expanded', isActive);
      
      if (isActive) {
        document.body.style.overflow = 'hidden';
      } else {
        document.body.style.overflow = '';
      }
    });
    
    // Close menu when clicking overlay
    if (mobileOverlay) {
      mobileOverlay.addEventListener('click', function() {
        navRight.classList.remove('active');
        mobileToggle.classList.remove('active');
        this.classList.remove('active');
        mobileToggle.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      });
    }
    
    // Close menu when clicking nav links
    const navLinks = navRight.querySelectorAll('.nav-link');
    navLinks.forEach(function(link) {
      link.addEventListener('click', function() {
        if (window.innerWidth <= 768) {
          navRight.classList.remove('active');
          mobileToggle.classList.remove('active');
          if (mobileOverlay) {
            mobileOverlay.classList.remove('active');
          }
          mobileToggle.setAttribute('aria-expanded', 'false');
          document.body.style.overflow = '';
        }
      });
    });
    
    // Dropdown functionality
    if (dropdownBtn && dropdownContent) {
      dropdownBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        e.preventDefault();
        const isExpanded = dropdownContent.classList.toggle('show');
        this.setAttribute('aria-expanded', isExpanded);
      });
      
      // Close dropdown when clicking links
      const dropdownLinks = dropdownContent.querySelectorAll('a');
      dropdownLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
          dropdownContent.classList.remove('show');
          dropdownBtn.setAttribute('aria-expanded', 'false');
          
          // Close mobile menu
          if (window.innerWidth <= 768) {
            setTimeout(function() {
              navRight.classList.remove('active');
              mobileToggle.classList.remove('active');
              if (mobileOverlay) {
                mobileOverlay.classList.remove('active');
              }
              mobileToggle.setAttribute('aria-expanded', 'false');
              document.body.style.overflow = '';
            }, 100);
          }
        });
      });
    }
    
    // Dark mode toggle
    if (darkToggle) {
      // Load saved preference
      const savedMode = localStorage.getItem('darkMode');
      if (savedMode === 'true') {
        document.documentElement.classList.add('dark');
        darkToggle.textContent = '‚òÄÔ∏è';
      }
      
      darkToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        e.preventDefault();
        document.documentElement.classList.toggle('dark');
        const isDark = document.documentElement.classList.contains('dark');
        localStorage.setItem('darkMode', isDark);
        darkToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
        console.log('üåì Dark mode:', isDark ? 'ON' : 'OFF');
      });
    }
    
    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.dropdown')) {
        if (dropdownContent) {
          dropdownContent.classList.remove('show');
        }
        if (dropdownBtn) {
          dropdownBtn.setAttribute('aria-expanded', 'false');
        }
      }
    });
    
    // Close mobile menu on window resize
    window.addEventListener('resize', function() {
      if (window.innerWidth > 768) {
        navRight.classList.remove('active');
        mobileToggle.classList.remove('active');
        if (mobileOverlay) {
          mobileOverlay.classList.remove('active');
        }
        mobileToggle.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
        if (dropdownContent) {
          dropdownContent.classList.remove('show');
        }
      }
    });
    
    console.log('‚úÖ Mobile menu initialized');
  }
  
  // Initialize when DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initMobileMenu);
  } else {
    initMobileMenu();
  }
})();
</script>
